<div *ngIf="cartProducts.length > 0">
  <h3 class="m-5 color">Cart</h3>
  <div *ngFor="let product of cartProducts">
    <div class="card mb-3 mainborder mx-auto my-3" style="max-width: 700px">
      <div class="row g-0">
        <div class="col-md-4">
          <img
            [src]="product?.images"
            class="img-fluid rounded-start navback"
            alt="product image"
          />
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">{{ product?.title }}</h5>
            <div class="fs-4 fw-bold cart-text">
              <p
                [innerHTML]="
                  product?.price | discount : product?.discountPercentage
                "
              ></p>
            </div>
            <div class="d-flex justify-content-between">
              <p class="card-text">
                <small class="text-dark fs-5"
                  >quentity : {{ product?.quantity }}</small
                >
              </p>
              <div
                class="rounded-pill"
                style="display: flex; align-items: center"
              >
                <button
                  class="border-0 bg-light rounded-start text-dark"
                  (click)="decreaseQuantity(product)"
                >
                  -
                </button>
                <p
                  style="width: 50px; text-align: center"
                  class="border-0 mt-3 bg-light text-dark"
                >
                  {{ product.quantity }}
                </p>
                <button
                  class="bg-light rounded-end border-0 text-dark"
                  (click)="increaseQuantity(product)"
                >
                  +
                </button>
              </div>

              <button
                class="btn maincolor mainhover text-light"
                (click)="deleteProduct(product?.id)"
              >
                Delete
              </button>
            </div>
            <!-- Error message section -->
            <span
              *ngIf="product.errorMessage"
              class="text-center mx-auto w-75 mt-3"
            >
              {{ product.errorMessage }}
            </span>
          </div>
        </div>
      </div>
    </div>
    <hr />
  </div>
  <div
    class="mainborder text-center rounded w-25 d-flex flex-column m-5"
    style="float: right"
  >
    <p class="fs-5">Total Price (after discount):</p>
    <span class="fs-3">${{ cartProducts | totalPrice }}</span>
  </div>
</div>

<div *ngIf="cartProducts.length === 0">
  <div class="empty-cart-message text-center">
    <p
      style="margin: auto"
      class="mainborder w-50 fs-3 py-2 text-center mt-5 text-dark"
    >
      Your cart is empty!
    </p>
    <img class="mt-5 rounded-pill" src="colored_cart_corrected.jpg" />
  </div>
</div>
